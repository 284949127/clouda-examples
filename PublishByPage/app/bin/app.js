sumeru.config({httpServerPort:8080,sumeruPath:"/../sumeru"}),sumeru.router.add({pattern:"/itworks",action:"App.itworks"}),App.itworks=sumeru.controller.create(function(e,t){e.onrender=function(e){e("itworks",["push","left"])}}),sumeru.router.add({pattern:"/publishbypage",action:"App.publishByPage"}),sumeru.router.setDefault("App.publishByPage"),App.publishByPage=sumeru.controller.create(function(e,t){var n=function(){t.get("pageNum")||t.set("pageNum",1),t.get("pagesize")||t.set("pagesize",2);var n={pagesize:t.get("pagesize"),page:t.get("pageNum"),uniqueField:"time"};t.sduser=e.subscribeByPage("pub-sduser",n,function(e,n){var r=n.page;t.bindByPage("sduserlist",{page:r,data:e.find()})})},r=function(){e.subscribe("pub-modelCount",function(e){t.set("modelCount",e/t.get("pagesize")),console.log("modelCount1:"+t.get("modelCount")),t.bind("sduserlist",{count:e})})};e.onload=function(){return[n,r]},e.onrender=function(e){e("display",["rotate","left"])},e.onready=function(e){t.event("sduserlist",function(){var e="click";"ontouchstart"in window&&(e="touchstart"),document.getElementById("pre").disabled=1==t.get("pageNum")?!0:!1,console.log("test:"+t.get("pageNum")+"---"+t.get("modelCount")),t.get("pageNum")==t.get("modelCount")||t.get("pageNum")>t.get("modelCount")?(console.log(t.get("pageNum")+"---"+t.get("modelCount")),document.getElementById("next").disabled=!0):document.getElementById("next").disabled=!1,document.getElementById("pre").addEventListener(e,function(){var e=t.get("pageNum");e--,t.set("pageNum",e),t.commit()}),document.getElementById("next").addEventListener(e,function(){var e=t.get("pageNum");e++,t.set("pageNum",e),t.commit()})}),Library.touch.on("#sdsave","touchstart",function(){var e=document.getElementById("sdname").value,n=document.getElementById("sdage").value;e||(e="John"),n||(n="27"),t.sduser.add({name:e,age:n}),t.sduser.save()})}}),Model.sduser=function(e){e.config={fields:[{name:"name",type:"string",defaultValue:"John"},{name:"age",type:"int",defaultValue:"26"},{name:"time",type:"datetime",defaultValue:"now()"}]}};