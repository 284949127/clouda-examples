sumeru.config({httpServerPort:8080,sumeruPath:"/../sumeru"}),sumeru.router.add({pattern:"/itworks",action:"App.itworks"}),App.itworks=sumeru.controller.create(function(e,t){e.onrender=function(e){e("itworks",["push","left"])}}),sumeru.router.add({pattern:"/staticSightingList",action:"App.staticSightingList"}),App.staticSightingList=sumeru.controller.create(function(e,t){e.onrender=function(e){e("staticSightingListView",["push","left"])}}),sumeru.router.add({pattern:"/sightingList",action:"App.sightingList"}),App.sightingList=sumeru.controller.create(function(e,t){var n=function(){t.sightings=e.subscribe("pubBirdSighting",function(e){t.bind("sighting_list",{data:e.find()})})};e.onload=function(){return[n]},e.onrender=function(e){e("sightingListView",["push","left"])},e.onready=function(n){t.event("sighting_list",function(){for(var t=n.querySelectorAll("li"),r=0,i=t.length;i>r;r++)t[r].addEventListener("touchstart",function(e){this.style.backgroundColor="#83bff1"}),t[r].addEventListener("touchend",function(t){var n=this.getAttribute("data-id");this.style.backgroundColor="#ffffff",e.redirect("/sightingDetail",{id:n})})}),Library.touch.on("#create","touchstart",function(){document.getElementById("create").src="../assets/res/add_down.png"}),Library.touch.on("#create","touchend",function(){document.getElementById("create").src="../assets/res/add.png",e.redirect("/createSighting")})}}),sumeru.router.add({pattern:"/sightingDetail",action:"App.sightingDetail"}),App.sightingDetail=sumeru.controller.create(function(e,t){var n=function(){session.sightings=e.subscribe("pubBirdSightingDetail",session.get("id"),function(e){session.bind("sighting_details",{data:e.find()})})};e.onload=function(){return[n]},e.onrender=function(e){e("sightingDetailView",["push","left"])},e.onready=function(){Library.touch.on("#back","touchstart",function(){document.getElementById("back").src="../assets/res/BS_down.png"}),Library.touch.on("#back","touchend",function(){document.getElementById("back").src="../assets/res/BS.png",e.redirect("/sightingList")}),Library.touch.on("#delete","touchstart",function(){document.getElementById("delete").src="../assets/res/delete_down.png"}),Library.touch.on("#delete","touchend",function(){document.getElementById("delete").src="../assets/res/delete.png";var t=parseInt(session.get("id"));session.sightings.destroy({date:t}),session.sightings.save(),e.redirect("/sightingList")})}}),sumeru.router.add({pattern:"/createSighting",action:"App.createSighting"}),App.createSighting=sumeru.controller.create(function(e,t){var n=function(){t.sighting=e.subscribe("pubBirdSighting",function(e){})};e.onload=function(){return[n]},e.onrender=function(e){e("createSightingView",["push","left"])},e.onready=function(){var n=!0;t.sighting.onValidation=function(e,t,r){e||(n=!1,this.rollback())},Library.touch.on("#cancel","touchstart",function(){document.getElementById("cancel").src="../assets/res/cancel_down.png"}),Library.touch.on("#cancel","touchend",function(){document.getElementById("cancel").src="../assets/res/cancel.png",e.redirect("/sightingList")}),Library.touch.on("#done","touchstart",function(){document.getElementById("done").src="../assets/res/done_down.png"}),Library.touch.on("#done","touchend",function(){document.getElementById("done").src="../assets/res/done.png";var r=document.getElementById("name_input"),i=r.value.trim(),o=document.getElementById("location_input"),a=o.value.trim();return""===i||""===a?(alert("Input value is empty!"),!1):(t.sighting.add({name:i,location:a}),t.sighting.save(),n?(o.value="",r.value="",e.redirect("/sightingList")):alert("Hmm... sorry that's not look like a Bird Name to me. \nPlease try another."),void 0)})}}),Model.birdSightingModel=function(e){e.config={fields:[{name:"name",type:"string",validation:"birdName"},{name:"location",type:"string"},{name:"date",type:"datetime",defaultValue:"now()"}]}},Library.createTimeFromate=sumeru.Library.create(function(e){return e.formateTime=function(e){var t=new Date(e),n=new Date;return getMinutes=t.getMinutes(),0===getMinutes?getMinutes+="0":getMinutes>0&&10>getMinutes&&(getMinutes="0"+getMinutes),t.getYear()==n.getYear()?t.getMonth()+1+"-"+t.getDate()+"  "+t.getHours()+":"+getMinutes:t.getYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"  "+t.getHours()+":"+getMinutes},e}),Handlebars.registerHelper("dateFormat",function(e){var t=new Date(e),n=t.getDate(),r=t.getMonth()+1,i=String(t.getFullYear()).substr(2,3);return(10>n?"0":"")+n+"."+(10>r?"0":"")+r+"."+i}),Handlebars.registerHelper("dateFormatTime",function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}),Handlebars.registerHelper("durationFormat",function(e){var t=Math.floor(e/1e3),n=t>=3600?Math.floor(t/3600):null,r=n?Math.floor(t%3600/60):Math.floor(t/60),i=Math.floor(t%60);return(n?n+":":"")+(10>r?"0":"")+r+":"+(10>i?"0":"")+i}),Handlebars.registerHelper("durationFormatISO",function(e){var t=Math.floor(e/1e3),n=Math.floor(t/3600),r=n?Math.floor(t%3600/60):Math.floor(t/60),i=Math.floor(t%60);return"PT"+n+"H"+r+"M"+i+"S"});